# الفهرس

- [الفهرس](#الفهرس)
  - [التعريف](#التعريف)
  - [تحميل البيئة الافتراضية](#تحميل-البيئة-الافتراضية)
    - [تعريف الملفات](#تعريف-الملفات)
      - [ملفات المشروع](#ملفات-المشروع)
      - [ملفات التطبيق](#ملفات-التطبيق)
      - [إضافة التطبيق](#إضافة-التطبيق)
      - [إضافة الواجهة](#إضافة-الواجهة)
      - [إضافة الصفحة](#إضافة-الصفحة)

## التعريف

- اطار عمل مفتوح المصدر لانشاء تطبيقات الويب بطريقة سريعة
- صنع مواقع عملاقة كأنستجرام ويوتيوب ويوديمي
- يقوم بعمل طرق حماية تلقائية
- يجب ان يكون بايثون بأحدث اصدار ليكون به `pip` ينزل الحزم
- يجب عمل بيئة افتراضية لفصل التطبيق عن الجهاز كي لا يحدث تداخل بين المكتبات

---

## تحميل البيئة الافتراضية

- لتحميل البيئة الافتراضية على النظام نكتب في `cli`:
  - `pip install virtualenv`

- لعمل بيئة افتراضية للمشروع، نذهب للمسار الذي سنضعه فيه ونكتب:
  - `virtualenv test`
  أو:
  - `python -m venv`
    - `test`: اسم اختياري للبيئة

- لتفعيل البيئة يجب أن نكون في المسار الذي به البيئة ونكتب:
  - `test\Scripts\activate`

- أحيانا سياسة تنفيذ السكربتات قد تمنع تشغيلها فلتغييرها مؤقتا:
  - `Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass`

- ثم تفعيل البيئة الافتراضية كالتالي:
  - `.\test\Scripts\Activate`

- ثم تحميل دجانجو:
  - `pip install django`

- لانشاء مشروع البيئة الإفتراضية يجب أن نكون داخل `test` ونكتب:
  - `django-admin startproject project`
    - `project`: اسم اختياري للمشروع

- لتفعيل السيرفر ندخل إلى `project` لنكون عند `manage.py` ونكتب:
  - `python manage.py runserver`
    - `project` يكون داخل فولدر اسمه `venv` داخل `test`
    - `project` بداخلها ثلاثة مجلدات:
    - `project`: للمشروع
    - `manage.py`: لتشغيل السيرفر
    - `db.sqlite3`: قاعدة بيانات يتم إنشاءها بعد تشغيل السيرفر
      - ان تم مسحها واعادة انشاءها فيجب تطبيق 18 ترحيل لكن بعد الضعط على `Ctrl + c` لإيقاف السيرفر ثم كتابة:
        - `python manage.py migrate`

- للانتقال إلى VSC:
  - `code .`

---

### تعريف الملفات

---

#### ملفات المشروع

- داخل الـ `project` عدة أمور:

- `__init__.py`: يظهر أثناء تحميل أي مكتبة جاهزة للاستيراد

- `settings.py`: إعدادات المشروع ويحتوي كوده على:
  - `SECRET_KEY`: المفتاح السري (يمنع مشاركته)
  - `INSTALLED_APPS`: التطبيقات المضافة للمشروع
  - `MIDDLEWARE`: خاصة بالأمان
  - `TEMPLATES`: لقوالب الفرونت إند
  - `DATABASES`: لقواعد البيانات (افتراضيا `SQL`)
  - `AUTH_PASSWORD_VALIDATORS`: المتحقق في نوعية كلمات المرور المحددة
  - `..etc`

- `urls.py`: للتحكم في الروابط ووضع مساراتها

- `asgi.py`, `wsgi.py`: ملفات خاصة بالسيرفر نادرة الاستخدام

---

#### ملفات التطبيق

لعمل تطبيق يجب عمل مجلد للمشروع بداخله عدة تطبيقات خاصة بجزئية معينة تسمى `APP` كل `APP` به عدة ملفات أهمها أربعة:

- `TEMPLATES`: هو الـ `FRONT END` --> التصميم الخاص بالـ `APP` ونحن من ننشئه

- `MODELS`: هو الـ `DATABASE` --> خاص بقاعدة البيانات

- `URLS`: خاص بروابط الـ `APP` نحن من ننشئه غير الخاص بالمشروع
  - `project\urls.py` ≠ `project\pages\urls.py`
  - `pages`: اسم اختياري للتطبيق

- `VIEWS`: هو الـ `LEADER` --> المشرف عليهم

#### إضافة التطبيق

- لإضافة `APP` يجب أن تكون البيئة الافتراضية مفعلة ثم نستخدم ملف `manage.py` فنكتب في الـ `cli`:
  - `python manage.py startaap pages`
    - `pages`: اسم اختياري للتطبيق بداخله يوجد عدة ملفات مثل:
      - `__init__`: تظهر بعد الإنشاء
      - `admin.py`: خاصة بالمشرف
      - `models.py`: لقاعدة البيانات
      - `views.py`: المشرف على باقي الملفات

- بعد إنشاء الـ `app (pages)` يجب:
  - ضمه إلى `INSTALLED_APPS` داخل `settings` بكتابة:
  - `pages.apps.PagesConfig`
    - `pages`: اسم التطبيق
    - `PagesConfig`: اسم الفئة العائد منه الموجودة داخل `apps` داخل `pages`

- إنشاء رابطه في `urls.py` داخل `project` باستيراد أداة `include` من مكتبة `django.urls` (تكون مكتوبة في الكود ومستردة `path` فنضيف معها `include`)

- ثم إضافة الرابط في `urlpatterns` بكتابة:

  ```sh
  path("pages", include("pages.urls"))
  ```

  - `pages`: هو اسم المسار بعد `/`
يمكن ابقاؤه فارغ باعتبارها الصفحة الرئيسية
  - `include`: الأداة المستوردة من `django.urls`
  - `pages.urls`: يرمز للملف الذي ننشؤه داخل `pages` وهو `urls.py`
    - نضع فيه روابط أي صفحة ننشئها من `views` داخل `pages`

#### إضافة الواجهة

- لاظهار الواجهة بمجرد ضغط المستخدم على الرابط:
  - في `pages\views`:

    ```sh
    from django.http import HttpResponse
    ```

  - ثم عمل دالة تطبع ما يظهر:

    ```sh
    def home(request):
    return HttpResponse("hello")
    ```

#### إضافة الصفحة

- أي صفحة خاصة بالتطبيق يتم كتابة رابطها بعد `\` بعد اسم النطبيق
- ثم كتابة رابط الدالة داخل `ursl.py`:
  - في `pages\urls`:

    - أولا نستورد المسار (يكون من خلال نفس المكتبة في `project`):

      ```sh
      from django.urls import path 
      ```

    - ثانيا نستورد ملف الدالة:

      ```sh
      from . import views
      ```

      - ( . ) يشير إلى الموقع الموجودين فيه

    - ثالثا ننشئ المتغير مقدم من دجانجو لكتابة الرابط وهو نفسه الموجود في `project`:

      ```sh
      urlpattrens = [
      path(" ", views.home, name = "home"),]
      ```

      `path`: تأخذ ثلاث قيم
      1- ما بعد المسار
      2- مكانه
      3- اسمه (أي اسم)

- المسار العائد من رابط المشروع يحمل اسم المسار الرئيسي أما العائد من رابط التطبيق يحمل اسم الصفحة داخل المسار
- ما معنى هذا؟
- يعني إن أردنا الدخول على تلك الصفحة فيجب كتابة المسار الرئيسي ثم مسار الصفحة مثال:
  - `project\urls.py`:

    ```sh
    path('Facebook/', include('pages.urls'))
    ```

    - المسار الرئيسي هو `Facebook`
يشمل مسار ملف الروابط `urls` داخل ملف التطبيق `pages`
    - يعني لو أردنا الدخول على تلك الصفحة نذهب لملف `urls` الخاص بالتطبيق:
      - `pages\urls.py`:

          ```sh
          path('group1', views.group2, name=group3)
          ```

        - فنجد دالة `group2` داخل `views` فمن أجل الوصول لتلك الصفحة وقراءة الدالة نكتب المسار الرئيسي ومن ثم مسار الصفحة:
          - `Facebook/group1`

- يجب ان يكون المسار `/` داخل `path` إما بعد `Facebook` أو قبل `group` المهم يكتب بين أي صفحتين
- يجب إبقاء خادم التطوير مفتوحا فإن تم إيقافه لن يسمح بإجراء أي تعديل دون عمل `runserver`
- خلاصة الأمر كلما أردنا عمل صفحة نكتبها كدالة في `pages\views` ونضع رابطها في `pages/urls`
